{% extends "layout.html" %}
{% block content %}

<p><a href="https://www.aozora.gr.jp/access_ranking/">青空文庫　アクセスランキング</a>の作品をワンクリックで読めるWebアプリです。</p>
<p>※ランキングはXHTML版のみを対象としています。</p>
<p></p>
<ul>
  <li>アプリ作者：Yuki Fujiwara</li>
  <li>GitHub：<a href="https://github.com/sky-y/extract-aozora-ranking">sky-y
    /
    extract-aozora-ranking</a></li>
</ul>

<form action="/" method="POST" enctype="multipart/form-data">
    <div class="row d-flex align-items-center">
        <div class="col-sm-1">時期</div>
        <div class="col-sm-9">
            <select name="select_date" class="form-select" aria-label="Default select example">
                {% for key, value in dic_dates.items() %}
                <option value="{{key}}" {% if key == select_date %} selected {% endif %}>
                    {{value}}
                </option>
                {% endfor %}
            </select>
        </div>
        <div class="col-sm-2 text-right">
            <button type="submit" class="btn-primary">出力</button>
        </div>
    </div>
</form>

<table class="table">
    <thead>
      <tr>
        <th scope="col">順位</th>
        <th scope="col">作品名</th>
        <th scope="col">著者名</th>
      </tr>
    </thead>
    <tbody>
        {% for r in ranking %}
        <tr>
            <th scope="row">{{r.rank}}</th>
            <td><a href="/xhtml?q={{r.title_link}}">{{r.title}}</a></td>
            <td>{{r.author}}</td>
        </tr>
        {% endfor %}
    </tbody>
  </table>
{% endblock %}